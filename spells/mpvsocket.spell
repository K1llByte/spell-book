#!/bin/bash
if [ -e /tmp ]; then
    prefix=/tmp
else
    prefix="$HOME"
fi
last=$(ps -ef | grep -v grep | grep -oP '\.mpvsocket[0-9]*' | sort -V | uniq | tail -1)
if [ -z "$last" ]; then
    if [ $# -gt 0 ] && [ "$1" = new ]; then
        echo "$prefix/.mpvsocket0"
    else
        echo "/dev/null"
    fi
else
    if [ $# -gt 0 ] && [ "$1" = new ]; then
        echo "$prefix/.mpvsocket$(($(echo "$last" | grep -oP '[0-9]+$') + 1))"
    else
        echo "$prefix/$last"
    fi
fi

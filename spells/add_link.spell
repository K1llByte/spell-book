#!/bin/bash
LINKS=../cantrips/links
if [ "$#" -lt 1 ]; then
    echo "Usage: $0 <link>"
    exit 1
fi

cd "$(dirname "$(realpath "$0")")" || exit 1

link="$(youtube-dl --get-title "$1" | sed -e 's/(/{/g; s/)/}/g' -e "s/'//g");$1"
echo adding "$link"
if grep "$link" "$LINKS" >/dev/null
then
    echo "$link" already in "$LINKS" 2>&1
    exit 1
else
    echo "$link" >> ../cantrips/links
fi

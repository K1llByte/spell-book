#!/bin/bash

#shellcheck source=/home/mendess/.local/bin/library
. library

mkdir -p /tmp/walls
cd /tmp/walls || exit 1
rm -f ./*

if [ "$1" = "" ]; then
    curl --silent https://magic.wizards.com/en/articles/media/wallpapers |
        grep '1920x1080' |
        cut -d'=' -f2 |
        cut -d'"' -f2 |
        xargs wget ||
        exit 1
else
    wget "$1" || exit
fi

for f in *; do
    mv -v "$f" \
        "$WALLPAPERS/$(echo "$f" | sed -e 's/_1920x1080//' -e 's/_Wallpaper//')"
done
